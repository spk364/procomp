{
  "$schema": "https://railway.app/railway.schema.json",
  "plugins": [],
  "services": [
    {
      "name": "api",
      "path": "apps/api",
      "startCommand": "python -m uvicorn app.main:app --host 0.0.0.0 --port $PORT",
      "envs": [
        { "key": "DATABASE_URL", "required": true, "description": "Async DSN for SQLAlchemy: postgresql+asyncpg://user:pass@host:5432/db" },
        { "key": "REDIS_URL", "required": false },
        { "key": "SUPABASE_URL", "required": true },
        { "key": "SUPABASE_ANON_KEY", "required": true },
        { "key": "SUPABASE_JWT_SECRET", "required": false },
        { "key": "SUPABASE_SERVICE_KEY", "required": false },
        { "key": "KASPI_API_KEY", "required": false }
      ]
    },
    {
      "name": "web",
      "path": "apps/web",
      "startCommand": "next start -p $PORT",
      "envs": [
        { "key": "NEXT_PUBLIC_API_BASE_URL", "required": true },
        { "key": "NEXT_PUBLIC_API_WS_URL", "required": true }
      ]
    }
  ]
}